(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const m of s.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&r(m)}).observe(document,{childList:!0,subtree:!0});function a(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=a(o);fetch(o.href,s)}})();const b="jarvis_memory_v1",S=[{pattern:/hello|hi|hey/i,action:t=>t.reply("Hello! How can I help you today?")},{pattern:/time|what time/i,action:t=>t.reply(new Date().toLocaleTimeString())},{pattern:/open (.+)/i,action:(t,n)=>{const a=n&&n[1]?n[1].trim():"https://www.google.com";let r=a;/^https?:\/\//i.test(r)||(r="https://"+r),t.reply("Opening: "+a),window.open(r,"_blank")}},{pattern:/remember (.+)/i,action:(t,n)=>{const a=n[1].trim(),r=t.loadMemory();r.notes=r.notes||[],r.notes.push({text:a,time:Date.now()}),t.saveMemory(r),t.reply("Okay, I'll remember that.")}},{pattern:/what did you remember|show memory/i,action:t=>{const a=(t.loadMemory().notes||[]).map(r=>`â€¢ ${new Date(r.time).toLocaleString()}: ${r.text}`).join(`
`);t.reply(a||"I don't have any saved notes.")}},{pattern:/clear memory|forget everything/i,action:t=>{t.saveMemory({}),t.reply("Memory cleared.")}},{pattern:/joke|tell me a joke/i,action:t=>{const n=["Why do programmers prefer dark mode? Because light attracts bugs.","I told a programmer to go outside â€” they said they couldn't find any bugs there either."];t.reply(n[Math.floor(Math.random()*n.length)])}}];function k(t){t.innerHTML=`
      <div class="min-h-screen flex items-center justify-center p-6">
        <div class="w-full max-w-3xl glass rounded-2xl p-6 shadow-xl">
          <div class="flex items-center gap-4 mb-4">
            <div class="w-12 h-12 rounded-full bg-gradient-to-br from-emerald-400 to-sky-400 flex items-center justify-center text-slate-900 font-bold">J</div>
            <div>
              <h1 class="text-xl font-semibold">Jarvis â€” Web Assistant</h1>
              <p class="text-sm text-slate-300">Runs fully in your browser. Deploy on GitHub Pages.</p>
            </div>
            <div class="ml-auto text-sm text-slate-400" id="status">Idle</div>
          </div>

          <div id="chat" class="h-72 overflow-y-auto p-4 bg-slate-800/30 rounded-xl mb-4"></div>

          <div class="flex gap-2 items-center">
            <input id="input" class="flex-1 p-3 rounded-lg bg-slate-900 border border-slate-700 focus:outline-none" placeholder="Type a command, e.g., 'what time' or 'remember Buy milk'"/>
            <button id="micBtn" class="px-4 py-2 bg-emerald-500/80 rounded-lg">ğŸ™ï¸</button>
            <button id="sendBtn" class="px-4 py-2 bg-sky-500/80 rounded-lg">Send</button>
          </div>

          <div class="mt-4 text-xs text-slate-400">
            <strong>Tip:</strong> Try "remember ...", "open example.com", "what time", or "tell me a joke".
          </div>
        </div>
      </div>
      `;const n=t.querySelector("#chat"),a=t.querySelector("#input"),r=t.querySelector("#sendBtn"),o=t.querySelector("#micBtn"),s=t.querySelector("#status");function m(e,i){const l=document.createElement("div");l.className="text-right mb-2";const c=document.createElement("div");c.className="inline-block p-3 rounded-lg max-w-[80%] break-words",c.style.background="linear-gradient(90deg,#0ea5a6,#06b6d4)",c.innerText=i,l.appendChild(c),n.appendChild(l),n.scrollTop=n.scrollHeight}function h(e,i){const l=document.createElement("div");l.className="text-left mb-2";const c=document.createElement("div");c.className="inline-block p-3 rounded-lg max-w-[80%] break-words",c.style.background="rgba(255,255,255,0.03)",l.appendChild(c),n.appendChild(l),n.scrollTop=n.scrollHeight;let p=0;const w=18+Math.random()*25,x=setInterval(()=>{c.innerText=e.slice(0,p++),n.scrollTop=n.scrollHeight,p>e.length&&(clearInterval(x),i&&i())},w)}function v(e){if(!("speechSynthesis"in window))return;const i=new SpeechSynthesisUtterance(e);i.lang=navigator.language||"en-US",speechSynthesis.cancel(),speechSynthesis.speak(i)}function g(){try{return JSON.parse(localStorage.getItem(b)||"{}")}catch{return{}}}function f(e){localStorage.setItem(b,JSON.stringify(e))}const y={reply:e=>{s.innerText="Responding...",h(e,()=>{s.innerText="Idle",v(e)})},saveMemory:f,loadMemory:g};function u(e){m("user",e),s.innerText="Thinking...";for(const l of S){const c=e.match(l.pattern);if(c)try{l.action(y,c);return}catch(p){console.error(p),y.reply("I had an error running that command.");return}}const i=["I'm not sure I understand. Try 'remember ...' or 'open example.com'","I can answer time, open links, store notes, and tell jokes.","Want me to call an external LLM? Add your API key in the README and enable it."];y.reply(i[Math.floor(Math.random()*i.length)])}r.addEventListener("click",()=>{const e=a.value.trim();e&&(a.value="",u(e))}),a.addEventListener("keydown",e=>{e.key==="Enter"&&(e.preventDefault(),r.click())});let d=null;if(window.webkitSpeechRecognition||window.SpeechRecognition){const e=window.SpeechRecognition||window.webkitSpeechRecognition;d=new e,d.lang=navigator.language||"en-US",d.continuous=!1,d.interimResults=!1,d.onstart=()=>{o.innerText="Listening..."},d.onend=()=>{o.innerText="ğŸ™ï¸"},d.onerror=i=>{o.innerText="ğŸ™ï¸",console.warn(i)},d.onresult=i=>{const l=i.results[0][0].transcript;u(l)}}else o.title="Speech recognition not supported in your browser";o.addEventListener("click",()=>{if(!d){const e=prompt("Speech recognition not available. Type command instead:");e&&u(e);return}try{d.start()}catch(e){console.warn(e)}}),h("Hello â€” I'm Jarvis, your web assistant. Try voice or text commands."),window.jarvis={handleCommand:u,loadMemory:g,saveMemory:f}}document.addEventListener("DOMContentLoaded",()=>{k(document.getElementById("app"))});
